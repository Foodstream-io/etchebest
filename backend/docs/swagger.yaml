basePath: /
definitions:
  discover.CategoryWithCount:
    properties:
      code:
        type: string
      id:
        type: integer
      image_url:
        type: string
      live_count:
        type: integer
      name:
        type: string
    type: object
  discover.DiscoverHomeResponse:
    properties:
      categories:
        items:
          $ref: '#/definitions/dto.CountryDTO'
        type: array
      top_dishes:
        items:
          $ref: '#/definitions/discover.DishWithStats'
        type: array
      trending_country:
        $ref: '#/definitions/dto.CountryDTO'
    type: object
  discover.DishWithStats:
    properties:
      country:
        $ref: '#/definitions/dto.CountryDTO'
      description:
        type: string
      id:
        type: integer
      image_url:
        type: string
      live_count:
        type: integer
      name:
        type: string
      total_views:
        type: integer
    type: object
  dto.CountryDTO:
    properties:
      code:
        type: string
      id:
        type: integer
      image_url:
        type: string
      name:
        type: string
    type: object
  dto.DishDTO:
    properties:
      country:
        $ref: '#/definitions/dto.CountryDTO'
      description:
        type: string
      id:
        type: integer
      image_url:
        type: string
      name:
        type: string
    type: object
  dto.LiveDTO:
    properties:
      country:
        $ref: '#/definitions/dto.CountryDTO'
      created_at:
        type: string
      current_viewers:
        type: integer
      description:
        type: string
      dish:
        $ref: '#/definitions/dto.DishDTO'
      ended_at:
        type: string
      has_replay:
        type: boolean
      id:
        type: integer
      like_count:
        type: integer
      preview_gif:
        type: string
      replay_url:
        type: string
      replay_views:
        type: integer
      started_at:
        type: string
      status:
        type: string
      tags:
        items:
          $ref: '#/definitions/dto.TagDTO'
        type: array
      thumbnail_url:
        type: string
      title:
        type: string
      user:
        $ref: '#/definitions/dto.UserDTO'
      view_count:
        type: integer
    type: object
  dto.TagDTO:
    properties:
      color:
        type: string
      id:
        type: integer
      image_url:
        type: string
      live_count:
        type: integer
      name:
        type: string
      slug:
        type: string
    type: object
  dto.UserDTO:
    properties:
      description:
        type: string
      firstName:
        type: string
      followerCount:
        type: integer
      followersIds:
        items:
          type: string
        type: array
      followingIds:
        items:
          type: string
        type: array
      id:
        type: string
      isFeaturedChef:
        type: boolean
      isVerified:
        type: boolean
      lastName:
        type: string
      profileImageUrl:
        type: string
      username:
        type: string
    type: object
  home.ChefHighlight:
    properties:
      active_lives_count:
        type: integer
      description:
        type: string
      firstName:
        type: string
      followerCount:
        type: integer
      followersIds:
        items:
          type: string
        type: array
      followingIds:
        items:
          type: string
        type: array
      id:
        type: string
      isFeaturedChef:
        type: boolean
      isVerified:
        type: boolean
      lastName:
        type: string
      profileImageUrl:
        type: string
      recent_live_title:
        type: string
      username:
        type: string
    type: object
  home.ChefsResponse:
    properties:
      chefs:
        items:
          $ref: '#/definitions/home.ChefHighlight'
        type: array
    type: object
  home.ErrorResponse:
    properties:
      error:
        type: string
    type: object
  home.HomePageResponse:
    properties:
      featured_chefs:
        items:
          $ref: '#/definitions/home.ChefHighlight'
        type: array
      featured_live:
        $ref: '#/definitions/dto.LiveDTO'
      tags:
        items:
          $ref: '#/definitions/dto.TagDTO'
        type: array
      upcoming_lives:
        items:
          $ref: '#/definitions/dto.LiveDTO'
        type: array
    type: object
  home.LivesFilteredResponse:
    properties:
      filters_applied:
        additionalProperties:
          type: string
        type: object
      lives:
        items:
          $ref: '#/definitions/dto.LiveDTO'
        type: array
      pagination:
        $ref: '#/definitions/home.Pagination'
    type: object
  home.LivesTabResponse:
    properties:
      lives:
        items:
          $ref: '#/definitions/dto.LiveDTO'
        type: array
      pagination:
        $ref: '#/definitions/home.Pagination'
    type: object
  home.Pagination:
    properties:
      limit:
        type: integer
      page:
        type: integer
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  home.SearchResponse:
    properties:
      lives:
        items:
          $ref: '#/definitions/dto.LiveDTO'
        type: array
      pagination:
        $ref: '#/definitions/home.Pagination'
      query:
        type: string
    type: object
  home.TagsResponse:
    properties:
      tags:
        items:
          $ref: '#/definitions/dto.TagDTO'
        type: array
    type: object
host: localhost:8080
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: API for Etchebest video streaming platform
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Etchebest API
  version: "1.0"
paths:
  /api/discover:
    get:
      description: Returns trending country, top dishes and categories
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/discover.DiscoverHomeResponse'
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Discover home
      tags:
      - Discover
  /api/discover/categories:
    get:
      description: Returns all active countries with live count
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              items:
                $ref: '#/definitions/discover.CategoryWithCount'
              type: array
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: List discover categories
      tags:
      - Discover
  /api/discover/categories/{id}/lives:
    get:
      description: Returns paginated lives for a specific country with filters
      parameters:
      - description: Category ID
        in: path
        name: id
        required: true
        type: integer
      - description: Page number
        in: query
        name: page
        type: integer
      - description: Page size
        in: query
        name: limit
        type: integer
      - description: Sort by (views, viewers, recent)
        in: query
        name: sort
        type: string
      - description: Live status
        in: query
        name: filters[status]
        type: string
      - description: Dish ID
        in: query
        name: filters[dish_id]
        type: integer
      - description: Minimum viewers
        in: query
        name: filters[min_viewers]
        type: integer
      - description: Lives started in last N hours
        in: query
        name: filters[hours_ago]
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get lives by category
      tags:
      - Discover
  /api/home:
    get:
      description: Return the featured live, tabs, chefs, and tags
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/home.HomePageResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/home.ErrorResponse'
      summary: Complete home page
      tags:
      - home
  /api/home/chefs:
    get:
      description: Return popular or featured creators
      parameters:
      - default: 6
        description: Number of chefs to return
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/home.ChefsResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/home.ErrorResponse'
      summary: List of featured chefs
      tags:
      - home
  /api/home/lives:
    get:
      description: 'Return the lives according to the tab: live, popular, replay,
        scheduled'
      parameters:
      - description: Tab name
        enum:
        - live
        - popular
        - replay
        - scheduled
        in: query
        name: tab
        required: true
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/home.LivesTabResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/home.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/home.ErrorResponse'
      summary: GetLivesByTab
      tags:
      - home
  /api/home/lives/filtered:
    get:
      description: Allow to filter lives by tag, status, user, etc.
      parameters:
      - description: Filter by tag ID
        in: query
        name: filters[tag_id]
        type: string
      - description: Filter by tag slug
        in: query
        name: filters[tag_slug]
        type: string
      - description: Filter by status
        enum:
        - live
        - scheduled
        - ended
        in: query
        name: filters[status]
        type: string
      - description: Filter by user ID
        in: query
        name: filters[user_id]
        type: string
      - description: Minimum current viewers
        in: query
        name: filters[min_viewers]
        type: integer
      - description: Has replay available
        in: query
        name: filters[has_replay]
        type: boolean
      - description: Sort order
        enum:
        - views
        - viewers
        - recent
        in: query
        name: sort
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/home.LivesFilteredResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/home.ErrorResponse'
      summary: GetLivesWithFilters
      tags:
      - home
  /api/home/search:
    get:
      description: Research by title, dish name, chef name
      parameters:
      - description: Search query
        in: query
        name: q
        required: true
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/home.SearchResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/home.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/home.ErrorResponse'
      summary: Global search for lives
      tags:
      - home
  /api/home/tags:
    get:
      description: Return all active culinary tags with the number of lives
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/home.TagsResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/home.ErrorResponse'
      summary: List all tags
      tags:
      - home
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
